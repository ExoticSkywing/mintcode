# ==========================================
# MintCode Production Environment Configuration
# ==========================================

# --- Security (CRITICAL: CHANGE THESE) ---
# 后台管理密钥，用于访问 /admin-ui 和管理 API
# 建议使用强密码，例如: sk_prod_Xy9#mP2$vL5nQ8
ADMIN_API_KEY=change_this_to_a_strong_password

# 卡密加密盐，用于生成和校验卡密签名
# 如果泄露，攻击者可以伪造卡密。修改此值会导致旧卡密失效。
VOUCHER_SECRET=change_this_to_a_random_long_string

# --- Database ---
# 数据库连接字符串
# 格式: mysql://user:password@host:port/database
# 注意：在 docker-compose 中访问宿主机 MySQL 请使用 host.docker.internal
DATABASE_URL=mysql://root:password@host.docker.internal:3306/mintcode

# --- Provider (5sim) ---
# 5sim.net 的 API Key，用于采购号码
FIVESIM_API_KEY=your_fivesim_api_key_here

# --- Worker / Reliability ---
# 兑换处理模式 (production 必须使用 external)
REDEEM_PROCESS_MODE=external

# 任务所有权租期（秒），Worker 崩溃后多久其他 Worker 可接管
WORKER_LEASE_SECONDS=30

# 购买请求飞行时间（秒），防止重复购买
BUY_INFLIGHT_SECONDS=20

# 最大购买尝试次数
MAX_BUY_ATTEMPTS=3

# --- User Interface ---
# 前端页面显示的等待倒计时（秒），建议设置为 120-180 秒
REDEEM_WAIT_SECONDS=180

# --- Developer API Security ---
# 请求时间戳允许的最大误差（秒），防止重放攻击
DEV_AUTH_TIMESTAMP_SKEW_SECONDS=300

# Rate Limits (每分钟请求数)
DEV_RATE_LIMIT_VOUCHER_PER_MIN=30    # 单个卡密频率限制
DEV_RATE_LIMIT_DEV_KEY_PER_MIN=60    # 单个开发者Key频率限制
DEV_RATE_LIMIT_IP_PER_MIN=120        # 单个IP频率限制

# --- System ---
# 是否自动创建数据库表 (true/false)
DB_AUTO_CREATE_TABLES=true
